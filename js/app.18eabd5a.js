(function(){"use strict";var t={3587:function(t,e,n){var s=n(8935),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("MainPage")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{menu:t.menu}}),n("button",{on:{click:t.clearLS}},[t._v("Сбросить LocalStorage")]),t.popupShow?n("Popup",{on:{closePopup:t.closePopup}},[n("Quiz",{on:{close:t.closePopup}})],1):t._e()],1)},o=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"header__content"},[t._m(0),n("ul",{staticClass:"header__menu"},t._l(t.menu,(function(e){return n("li",{key:e,staticClass:"header__menu-item",on:{click:t.showAlert}},[t._v(" "+t._s(e)+" ")])})),0)])])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"header__logo",attrs:{href:"https://m-flowers.com/",target:"_blank"}},[s("img",{attrs:{alt:"logo",src:n(9574)}})])}],c={name:"Header",props:{menu:Array},methods:{showAlert(){alert("Здесь могла быть ваша реклама")}}},p=c,d=n(1001),m=(0,d.Z)(p,u,l,!1,null,"095648f8",null),h=m.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup"},[n("div",{staticClass:"popup__content"},[n("div",{staticClass:"popup__close",on:{click:function(e){return t.$emit("closePopup")}}}),n("h2",{staticClass:"popup__title"},[t._v("Please answer a few questions")]),t._t("default")],2)])},_=[],w={name:"Popup"},g=w,b=(0,d.Z)(g,f,_,!1,null,"f0868640",null),v=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quiz"},[n("div",{staticClass:"quiz__progress"},t._l(t.uniqNumArr,(function(e){return n("div",{key:e,class:["quiz__progress-item",{"quiz__progress-item_active":t.currentQuest.num>=e}]})})),0),t.currentQuest&&t.currentQuest.answers?n("form",{staticClass:"quiz__quest",on:{submit:function(e){return e.preventDefault(),t.catchSubmit.apply(null,arguments)}}},[n("h3",{staticClass:"quiz__title"},[t._v(t._s(t.questTitle))]),n("ul",{staticClass:"quiz__answers"},t._l(t.currentQuest.answers,(function(e){return n("li",{key:e.title,staticClass:"quiz__answer"},[n(t.getAnswerComponent(e.type),{tag:"component",attrs:{answer:e,name:""+t.currentQuest.id}})],1)})),0),n("Button",{attrs:{title:t.buttonTitle,type:"submit"}})],1):n("div",{staticClass:"quiz__preloader"},[n("div",{staticClass:"quiz__preloader-img"})])])},y=[],C=n(6166),A=n.n(C),k={RADIO:"radioBtn",CHECKBOX:"checkBtn",TEXTAREAORCHECK:"doNotWantAnswer",TEXTAREAANDCHECK:"myAnswer"},S=JSON.parse('[{"id":"1","num":"1","title":"How often do you visit our site? (1/5)","answers":[{"title":"A couple of times a month","type":"radioBtn"},{"title":"Once a week","type":"radioBtn"},{"title":"Few times a week","type":"radioBtn"},{"title":"Every day","type":"radioBtn"},{"title":"Several times a day","type":"radioBtn"}],"nextStepId":"2"},{"id":"2","num":"2","title":"Are you comfortable using our site? (2/5)","answers":[{"title":"Comfortable","type":"radioBtn","nextStepId":"4"},{"title":"Not very comfortable","type":"radioBtn","nextStepId":"3"},{"title":"Very uncomfortable","type":"radioBtn","nextStepId":"3"}],"nextStepId":"logical_сhoice"},{"id":"3","num":"3","title":"Tell us what exactly you do not like? (3/5)","answers":[{"title":"I do not want to answer","type":"doNotWantAnswer"}],"nextStepId":"5"},{"id":"4","num":"3","title":"Tell us what you like most about our site? (3/5)","answers":[{"title":"I do not want to answer","type":"doNotWantAnswer"}],"nextStepId":"5"},{"id":"5","num":"4","title":"What changes would you like? (4/5)","answers":[{"title":"Design change","type":"checkBtn"},{"title":"Newsletter","type":"checkBtn"},{"title":"Online consultations","type":"checkBtn"},{"title":"Your answer","type":"myAnswer"}],"nextStepId":"6"},{"id":"6","num":"5","title":"Is there anything else you want to tell us? (5/5)","answers":[{"title":"I do not want to answer","type":"doNotWantAnswer"}],"nextStepId":"end"}]'),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"custom-input custom-input_radio"},[n("input",{staticClass:"custom-input__input",attrs:{type:"radio",name:t.name,required:""},domProps:{value:t.answer.title},on:{change:t.emitChange}}),n("div",{staticClass:"custom-input__custom-input"}),n("span",[t._v(t._s(t.answer.title))])])},q=[],E={name:"Radio",props:{name:String,answer:Object},methods:{emitChange(t){this.$emit("change",t)}}},B=E,O=(0,d.Z)(B,I,q,!1,null,"7fb38c53",null),Q=O.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"custom-input custom-input_checkbox"},[n("input",{staticClass:"custom-input__input",attrs:{type:"checkbox",name:t.name},domProps:{value:t.answer.title},on:{change:t.emitChange}}),n("div",{staticClass:"custom-input__custom-input"}),n("span",[t._v(t._s(t.answer.title))])])},D=[],N={name:"CheckBox",props:{name:String,answer:Object},methods:{emitChange(t){this.$emit("change",t)}}},$=N,P=(0,d.Z)($,T,D,!1,null,"f8b95794",null),z=P.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"not-want-answer"},[n("TextArea",{attrs:{textAreaDisabled:t.textAreaDisabled,name:t.name,required:""}}),t._v(" "),n("CheckBox",{attrs:{answer:t.answer,name:t.name},on:{change:t.changeInput}})],1)},Z=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{key:t.name,class:["textarea",{textarea_disabled:t.textAreaDisabled}],attrs:{name:t.textAreaDisabled?"":t.name,required:!t.textAreaDisabled}})},j=[],W={name:"TextArea",props:{textAreaDisabled:{type:Boolean,required:!0,default:!1},name:String}},K=W,M=(0,d.Z)(K,H,j,!1,null,"43ac5562",null),X=M.exports,L={name:"doNotWantAnswer",data(){return{textAreaDisabled:!1}},props:{answer:Object,name:String},methods:{changeInput(t){this.textAreaDisabled=t.target.checked}},components:{CheckBox:z,TextArea:X}},F=L,G=(0,d.Z)(F,R,Z,!1,null,"1c32e4e4",null),J=G.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-answer"},[n("CheckBox",{staticClass:"my-answer__title",attrs:{answer:t.answer,name:t.textAreaDisabled?t.name:""},on:{change:t.changeInput}}),n("TextArea",{attrs:{textAreaDisabled:t.textAreaDisabled,name:t.name}})],1)},Y=[],U={name:"MyAnswer",data(){return{textAreaDisabled:!0}},props:{answer:Object,name:String},methods:{changeInput(t){this.textAreaDisabled=!t.target.checked}},components:{CheckBox:z,TextArea:X}},tt=U,et=(0,d.Z)(tt,V,Y,!1,null,"72eb6a28",null),nt=et.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn",attrs:{type:t.type},on:{click:t.btnClick}},[t._v(" "+t._s(t.title)+" ")])},rt=[],at=(n(6699),{name:"Button",props:{title:{type:String,required:!0,validator(t){return["submit","next"].includes(t)}}},computed:{type(){return"submit"===this.title?"submit":"button"}},methods:{btnClick(){"submit"===this.title?this.$emit("submit"):this.$emit("click")}}}),it=at,ot=(0,d.Z)(it,st,rt,!1,null,"6b0e717c",null),ut=ot.exports,lt={name:"Quiz",data(){return{questions:null,currentQuestId:null,constants:k,result:{},urlGet:"https://run.mocky.io/v3/05429040-2827-46be-a301-317f0f66f3e8",urlPost:"https://run.mocky.io/v3/849fdad1-c328-442a-a88b-500542269c9d"}},computed:{uniqNumArr(){return this.questions?.length?[...new Set(this.questions.map((t=>t.num)))]:[]},currentQuest(){return this.questions?.find((t=>t.id===this.currentQuestId))},questTitle(){return this.currentQuest?.title??"Вопрос не найден"},buttonTitle(){return"end"===this.currentQuest?.nextStepId?"submit":"next"}},methods:{getAnswerComponent(t){switch(t){case this.constants.RADIO:return Q;case this.constants.CHECKBOX:return z;case this.constants.TEXTAREAORCHECK:return J;case this.constants.TEXTAREAANDCHECK:return nt}},catchSubmit(t){this.addResult(t),this.nextAction()},addResult(t){const e=new FormData(t.srcElement);this.result[this.currentQuest.id]={title:this.currentQuest.title,answer:e.getAll(this.currentQuest.id)}},nextAction(){const t=this.getNextStepId();Number.isInteger(+t)?this.goNextStep(t):"end"===t?(this.sendResult(),this.$emit("close")):alert("Ошибка в номере вопроса. Обратитесь в техподдержку.")},goNextStep(t){this.currentQuestId=t},getNextStepId(){const t=this.result&&this.result[this.currentQuest.id]&&this.result[this.currentQuest.id].answer&&this.result[this.currentQuest.id].answer.length>0?this.result[this.currentQuest.id].answer[0]:null,e=this.currentQuest.answers.find((e=>e.title===t));return!!e&&e.nextStepId||this.currentQuest.nextStepId},sendResult(){A().post(this.urlPost,this.result).then((t=>console.log("response",t))).catch((t=>console.log("error",t)))}},async mounted(){try{const t=await A().get(this.urlGet);this.questions=t.data}catch{this.questions=S}this.currentQuestId=this.questions[0].id},components:{Radio:Q,CheckBox:z,DoNotWantAnswer:J,MyAnswer:nt,Button:ut}},ct=lt,pt=(0,d.Z)(ct,x,y,!1,null,"84d19778",null),dt=pt.exports,mt={name:"MainPage",data(){return{menu:["Home","Catalog","Tenders","Trade","Web-Shop NL"],popupShow:!0}},methods:{closePopup(){this.popupShow=!1,window.localStorage.setItem("quizClosed","true")},clearLS(){window.localStorage.setItem("quizClosed","false")}},mounted(){this.popupShow="false"===window.localStorage.getItem("quizClosed")},components:{Header:h,Popup:v,Quiz:dt}},ht=mt,ft=(0,d.Z)(ht,i,o,!1,null,"6c477550",null),_t=ft.exports,wt={name:"App",components:{MainPage:_t}},gt=wt,bt=(0,d.Z)(gt,r,a,!1,null,null,null),vt=bt.exports;s.Z.config.productionTip=!1,new s.Z({render:t=>t(vt)}).$mount("#app")},9574:function(t,e,n){t.exports=n.p+"img/logo.6bebb587.svg"}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,s,r,a){if(!s){var i=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],a=t[c][2];for(var o=!0,u=0;u<s.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[u])}))?s.splice(u--,1):(o=!1,a<i&&(i=a));if(o){t.splice(c--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,i=s[0],o=s[1],u=s[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(u)var c=u(n)}for(e&&e(s);l<i.length;l++)a=i[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},s=self["webpackChunkmodesto_test_task"]=self["webpackChunkmodesto_test_task"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(3587)}));s=n.O(s)})();
//# sourceMappingURL=app.18eabd5a.js.map